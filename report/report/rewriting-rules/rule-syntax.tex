\section{Rule syntax}

\fixme{This is implementation specific.}

The actual syntax of rewriting rules are defined by the grammar in
\fref{tab:rule-grammar}. One or more rules may be defined in a rule-file. This
makes it possible to create ``groupings'' of the rewriting rules. Such groupings
are solely intended for ease of reading/writing the rules but it also has the
side effect that the rules will be applied in the order that they are defined in
the file and files will be read into the system in the order they are reported
by the operating system through a directory listing.

\subsection{Syntax quirks}

The rule syntax has been designed to resemble SML syntax, but still not the
extend where it is confusing to see which is SML and which is rule specific
syntax.

\begin{description}
\item[Clauses] all starts with a pipe (\ttt{|}), also the first. We chose this as
  there is no \ttt{fn} keyword at the beginning so it looked a bit empty and to
  emphasise that it is a rule clause and not a SML clause.

\item[Transformers] all starts with a pound sign (\ttt{ยฃ}) followed by any valid
  SML function name. This was chosen as it is not a valid SML token so it would
  stand out as being something special.

\item[Meta patterns] all starts with a section sign (\ttt{ยง}) followed by any
  valid SML function name. This was chosen as it is not a valid SML token so it
  would stand out as being something special.

\item[Meta variables] all starts with a underscore (\ttt{\_}) followed by any
  valid SML varaible name. This was chosen as no SML identifier may start with
  an underscore.
\end{description}

Not all valid SML code may be written inside a rule definition. As seen from the
rule grammar expressions are defined as being \synt{sexp} (scheme expressions)
and patterns as \synt{spat} (scheme patterns). The grammar for these two are
given in 



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../report"
%%% End: 
