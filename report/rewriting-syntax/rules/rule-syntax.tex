\subsection{Rewriting rule syntax}

$\{ \ldots \}$ means zero or more occurances.
$+$ means 1 or more occurances.

When specifying rewriting rules we 

\fixme{Add pattern variables to the grammer as using..}
\fixme{This should go in the appendix}

\setlength{\grammarindent}{7.3em}
\begin{grammar} 
 
  <upper-letter> = "[A-Z]" \hfill "# Regex, big letter"

  <lower-letter> = "[a-z]" \hfill "# Regex, small letter"

  <ws> = "\\s" \hfill "\# Regex, all whitespace"

  <letter> ::= <upper-letter> | <lower-letter>

  <rules> ::= <rule> | <rule> <rules>

  <rule> ::= "rule" <rule-type> <rule-name> \\
             \hspace*{1em} <clauses> \\
             <opt-where> \hfill "\# is optional" \\
             "becomes" \\
             \hspace*{1em} <clauses> \\
             "end"

  <rule-type> ::= "clauses" | "expression" 

  <rule-name> ::= <letter>+ \hfill "\# No spaces allowed in rule-names"

  <clauses> ::= <clause>+

  <clause> ::= "|" <spat> "=>" <sexps>

  <opt-where> ::= something with the dom....

  <spat> ::= <sml-identifier> | <meta-pattern>

  <sexps>  ::= <sexp>+
  
  <sexp>   ::= <sml-identifier> | <meta-pattern> | <transformer>

  <transformer> ::= "[" <upper-letter> "]" "(" <meta-pattern> ")" \hfill "\# Fix the input"

  <meta-pattern> ::= "ยง" <upper-letter> \{ <opt-meta-pattern-input> \}

  <opt-meta-pattern-input> ::= "[" <meta-pattern> "]" \hfill "\# Fix the input"

\end{grammar}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../rewriting-syntax"
%%% End: 
