\section{Predefined rules}

Below are the mathematical definitions of rewriting rules for some of the most
common mistakes made in SML.

\begin{definition}[Rewriting of \textsf{map}-instances] \ \\

  \begin{eqnarray*}[rqrl]
    | & \mathcal{C}  [\overline{x} \texttt{ :: } \overline{xs}] &  => \mathbb{D}
    (\mathcal{C}[ \overline{x}]) \texttt{ :: } \textsf{self}(\kappa ( \mathcal{C}
    [ \overline{xs} ] ) ) \\
    | & \mathcal{D} & => \texttt{nil}\\
    & \textsf{where}\ \ & dom(\mathcal{D}) = dom(\mathcal{C}[\texttt{\_}])\\
   \tabpause{\begin{center}$\Downarrow$\end{center}}
    | & \mathcal{C} [ xs ] & => \texttt{map (fn $m$ => $\mathbb{D}(\mathcal{C} [ m ]$ )) $xs$}
  \end{eqnarray*}
\end{definition}
\fixme{add the foldr rule}
\begin{definition}[Rewriting of \textsf{foldl}-instances] \ \\

  \begin{eqnarray*}[rqrl]
    | & \mathcal{C}[\overline{x} \texttt{ :: } \overline{xs}] &
    => \mathbb{D} ( \texttt{($\mathcal{C}
      [\overline{x}]$, $\textsf{self}( \mathcal{C}[\overline{xs}])$)} ) \\
    | & \mathcal{D} & => \mathbb{E}(\mathcal{D})\\
    & \textsf{where}\ \ & dom(\mathcal{D}) = dom(\mathcal{C}[\texttt{\_}])\\
    \tabpause{\begin{center}$\Downarrow$\end{center}}  
    | & \mathcal{C} [xs] & => \texttt{foldl (fn ($a$, $b$) => $\mathbb{D}($($\mathcal{C}[a]$, $b$)$)$) $\mathbb{E}(\mathcal{C}[\texttt{nil}])$ $xs$}
  \end{eqnarray*}
\end{definition}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../report"
%%% End: 
