\documentclass[oneside]{memoir}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[british]{babel}

\usepackage[draft]{fixme}

\usepackage{mdwtab}
\usepackage{syntax}
\usepackage{mathenv}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{semantic} % for the \mathlig function

\usepackage{fix-cm}

\usepackage{tikz}
\usetikzlibrary{decorations.pathreplacing}

\usepackage{fancyvrb}
\newenvironment{code}
{\quote\Verbatim}
{\endquote\endVerbatim}

\newcommand{\floor}[1]{\ensuremath{\lfloor #1 \rfloor}}
\newcommand{\codeinline}[1]{\texttt{#1}}

\chapterstyle{hangnum}

\theoremstyle{definition}
\newtheorem{example}{Example}
\newtheorem{definition}{Definition}

\begin{document}

$\{ \ldots \}$ means zero or more occurances.
$+$ means 1 or more occurances.


\setlength{\grammarindent}{7.3em}
\begin{grammar} 
 
  <upper-letter> = "[A-Z]" \hfill "# Regex, big letter"

  <lower-letter> = "[a-z]" \hfill "# Regex, small letter"

  <ws> = "\\s" \hfill "\# Regex, all whitespace"

  <letter> ::= <upper-letter> | <lower-letter>

  <rules> ::= <rule> | <rule> <rules>

  <rule> ::= "rule" <rule-type> <rule-name> \\
             \hspace*{1em} <clauses> \\
             <opt-where> \hfill "\# is optional" \\
             "becomes" \\
             \hspace*{1em} <clauses> \\
             "end"

  <rule-type> ::= "clauses" | "expression" 

  <rule-name> ::= <letter>+ \hfill "\# No spaces allowed in rule-names"

  <clauses> ::= <clause>+

  <clause> ::= "|" <spat> "=>" <sexps>

  <opt-where> ::= something with the dom....

  <spat> ::= <sml-identifier> | <meta-pattern>

  <sexps>  ::= <sexp>+
  
  <sexp>   ::= <sml-identifier> | <meta-pattern> | <transformer>

  <transformer> ::= "{" <upper-letter> "}" "(" <meta-pattern> ")" \hfill "\# Fix the input"

  <meta-pattern> ::= "ยง" <upper-letter> \{ <opt-meta-pattern-input> \}

  <opt-meta-pattern-input> ::= "[" <meta-pattern> "]" \hfill "\# Fix the input"

\end{grammar}


\appendix

\chapter{Sample rewriting rules}

\section{Map}



\end{document}
%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
